# extremely helpful documentation
# https://github.com/puppetlabs/puppet-specifications/blob/master/language/func-api.md#the-4x-api
#
#
# @return [Hash] hash of lookup keys and their associated values
#
# The function must either call the context object not_found method,
# or return a hash of lookup keys and their associated values.
# (The hash can be empty.)
# Values in the returned hash can include Hiera interpolation tokens
# like %{variable} or %{lookup('key')}
#
# @param options [Hash] A hash of options
# @param context [Puppet::LookupContext] A Puppet::LookupContext object
# @param segments [Array[Variant[String, Numeric]]] An array of lookup key segments.
# The array of key segments is made by splitting the requested lookup key
# on the dot (.) subkey separator. For example, a lookup for users.dbadmin.uid would
# result in ['users', 'dbadmin', 'uid']. Positive base-10 integer subkeys (for
# accessing array members) are converted to Integer objects, but other number-like
# subkeys remain as strings.
#
# https://docs.puppet.com/puppet/4.10/hiera_custom_data_dig.html
Puppet::Functions.create_function(<%= "#{module_name}::#{name}".to_sym.inspect %>) do

  def <%= name %>(segments, options, context)
    # compute the return value here
  end

  dispatch :<%= name %> do
    param 'Array[Variant[String, Numeric]]', :segments
    param 'Hash', :options
    param 'Puppet::LookupContext', :context
  end

  # you can define other helper methods in this code block as well
end
